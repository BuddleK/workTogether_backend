<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="myPageNormal">
	<!-- 페이지 입장 시 비밀번호 입력 -->
	<select id="checkPw">
		SELECT COUNT(USERS_PASSWORD)
		FROM TBL_USERS
		WHERE USERS_PASSWORD = #{usersPassword}
	</select>

	<!-- 회원정보 조회 -->
	<select id="normalSearch" parameterType="NormalModifyDTO">
		SELECT 
			n.USERS_NAME, n.NORMAL_USERS_LEVEL, n.USERS_POSTSAL_CODE, n.USERS_ADDRESS_LINE1, n.USERS_ADDRESS_LINE2,
			n.USERS_PHONE, u.USERS_ID, n.USERS_EMAIL, u.USERS_PASSWORD
		FROM tbl_users u
		JOIN tbl_normal_users n
		  ON u.users_number = n.users_number
		WHERE u.users_id = #{userId};
	</select>

	<!-- 회원정보 수정 -->
	<update id="normalModify" parameterType="NormalModifyDTO">
		UPDATE tbl_normal_users	n
		SET (
		n.normal_users_level,
		n.users_postsal_code,
		n.users_address_line1,
		n.users_address_line2,
		n.users_email
		) = ( 
		SELECT
			#{normalUsersLevel},
			#{usersPostCode},
			#{usersAddrLine1},
			#{usersAddrLine2}, 
			#{usersEmail}
		FROM dual
		)
		WHERE n.normal_number = #{normalNumber}
	</update>
	
	<!-- 찜한 목록 조회 -->
	<select id="normalfavoriteListSearch" parameterType="NormalFavoriteListDTO">
		
	</select>
	
</mapper>